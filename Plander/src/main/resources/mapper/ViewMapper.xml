<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="com.bit.mapper.ViewMapper">

	<!-- planderList - 플래너 랜덤 추천 -->
	<select id="getListPlannerRandom"
		resultType="com.bit.domain.PlannerVO">
		select *
		from(select * from planner order by dbms_random.value)
		where
		rownum <![CDATA[ <=  10 ]]>
	</select>

	<!-- planderList.jsp - 인기 카테고리 추출 -->
	<select id="getListCategory"
		resultType="com.bit.domain.CategoryVO">
		select * from category
	</select>

	<!-- planderList.jsp - 해시태그용 -->
	<select id="getListCategory_d"
		resultType="com.bit.domain.Category_dVO">
		select * from category_detail
	</select>

	<!-- CategoryDetailPlanner.jsp - 카테고리별 플래너  -->
	<select id="getDetailPlannerList"
		resultType="com.bit.domain.PlannerVO">
		select *
		from planner p, users u
		where p.u_idx = u.u_idx
		and
		ct_idx = #{ct_idx }
	</select>

	<!-- plannerList.jsp - 추천 및 카테고리별 플래너 -->
	<select id="getDetailPlannerList_2"
		resultType="com.bit.domain.PlannerVO">
		select a.*
			from (select p.* ,u.name
					from planner p, users u
					where p.u_idx = u.u_idx
					and ct_idx = #{ct_idx }
					order by p_idx) a
			where rownum <![CDATA[ <=  8 ]]>
	</select>
</mapper>

